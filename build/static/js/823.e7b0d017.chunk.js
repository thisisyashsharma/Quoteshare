"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[823],{51:(e,t,n)=>{function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>r})},429:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(51),o=n(43);const r=(e,t)=>"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,c]=(0,o.useReducer)(r,{status:t?"pending":null,data:null,error:null}),a=(0,o.useCallback)(async function(t){c({type:"SEND"});try{const n=await e(t);c({type:"SUCCESS",responseData:n})}catch(n){c({type:"ERROR",errorMessage:n.message||"Something went wrong!"})}},[e]);return(0,s.A)({sendRequest:a},n)}},823:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var s=n(43),o=n(557),r=n(582),c=n(202);const a="HighlightedQuote_quote__dLjS5";var d=n(285),l=n(579);const i=e=>(0,l.jsx)(c.Fragment,{children:(0,l.jsxs)("figure",{className:a,children:[(0,l.jsx)("p",{children:e.text}),(0,l.jsxs)("figcaption",{children:[" - ",e.author," ",(0,l.jsx)(d.sgm,{})," "]})]})});var m=n(429),u=n(980),h=n(530);const j="Comments_comments__Xd-Gs",p="CommentItem_item__DcKeJ",f=e=>(0,l.jsx)("li",{className:p,children:(0,l.jsx)("p",{children:e.text})}),x="CommentsList_comments__1Fj19",g=e=>(0,l.jsx)("ul",{className:x,children:e.comments.map(e=>(0,l.jsx)(f,{text:e.text},e.id))}),w="NewCommentForm_form__Zn0tB",b="NewCommentForm_control__U7n5R",y="NewCommentForm_actions__3rkJH",C=e=>{const t=(0,s.useRef)(),{sendRequest:n,status:o,error:r}=(0,m.A)(u.BC),{onAddedComment:c}=e;(0,s.useEffect)(()=>{"completed"!==o||r||c()},[o,c,r]);const a=s=>{s.preventDefault();const o=t.current.value;n({commentData:{text:o},quoteId:e.quoteId}),0===o.trim().length&&alert("Please enter a comment!")};return(0,l.jsxs)("form",{className:w,onSubmit:a,autoComplete:"off",children:["pending"===o&&(0,l.jsx)("div",{className:"centered",children:(0,l.jsx)(h.A,{})}),(0,l.jsxs)("div",{className:b,onSubmit:a,children:[(0,l.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),(0,l.jsx)("textarea",{id:"comment",rows:"5",required:!0,ref:t})]}),(0,l.jsx)("div",{className:y,children:(0,l.jsx)("button",{className:"btn--flat",children:"Add Comment"})})]})};var N=n(149);const O=()=>{const[e,t]=(0,s.useState)(!1),n=(0,o.g)(),{quoteId:r}=n,{sendRequest:c,status:a,data:d,error:i}=(0,m.A)(u.Ow,!0);(0,s.useEffect)(()=>{c(r)},[c,r]);const p=(0,s.useCallback)(()=>{c(r)},[c,r]);let f;return"pending"===a&&(f=(0,l.jsxs)("div",{className:"centered",children:[(0,l.jsx)(h.A,{})," "]})),"completed"===a&&d&&d.length>0&&(f=(0,l.jsx)(g,{comments:d})),"completed"!==a||d&&0!==d.length||(f=(0,l.jsx)("p",{className:"centered",children:"No comments were added yet!"})),i?(0,l.jsx)("p",{className:"centered focused",children:i}):(0,l.jsxs)("section",{className:j,children:[(0,l.jsx)("h2",{children:"User Comments"}),!e&&(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)("button",{className:"btn--flat",onClick:()=>{t(!0)},children:[(0,l.jsx)("span",{children:"Add a Comment"}),(0,l.jsx)(N.WFO,{})]})}),e&&(0,l.jsx)(C,{quoteId:r,onAddedComment:p}),f]})},_=()=>{const e=(0,o.W5)(),t=(0,o.g)(),{quoteId:n}=t,{sendRequest:c,status:a,data:j,error:p}=(0,m.A)(u.zt,!0);return(0,s.useEffect)(()=>{c(n)},[c,n]),"pending"===a?(0,l.jsx)("div",{className:"centered",children:(0,l.jsx)(h.A,{})}):p?(0,l.jsx)("p",{className:"centered",children:p}):j.text?(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(i,{text:j.text,author:j.author}),(0,l.jsx)(o.qh,{path:e.path,exact:!0,children:(0,l.jsx)("div",{className:"centered",children:(0,l.jsxs)(r.N_,{className:"btn--flat",to:"".concat(e.url,"/comments"),children:["Load Comments ",(0,l.jsx)(d.Ll9,{})]})})}),(0,l.jsx)(o.qh,{path:"".concat(e.path,"/comments"),children:(0,l.jsx)(O,{})})]}):(0,l.jsx)("p",{children:"No quote found!"})}},980:(e,t,n)=>{n.d(t,{BC:()=>d,Ow:()=>l,dB:()=>r,kr:()=>a,zt:()=>c});var s=n(51);const o="https://s22-auth-default-rtdb.firebaseio.com//quoteApp";async function r(){const e=await fetch("".concat(o,"/quotes.json")),t=await e.json();if(!e.ok)throw new Error(t.message||"Could not fetch quotes.");const n=[];for(const o in t){const e=(0,s.A)({id:o},t[o]);n.push(e)}return n}async function c(e){const t=await fetch("".concat(o,"/quotes/").concat(e,".json")),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not fetch quote.");return(0,s.A)({id:e},n)}const a=async e=>{const t=await fetch("".concat(o,"/quotes.json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not create quote.");return null};async function d(e){const t=await fetch("".concat(o,"/comments/").concat(e.quoteId,".json"),{method:"POST",body:JSON.stringify(e.commentData),headers:{"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not add comment.");return{commentId:n.name}}const l=async e=>{const t=await fetch("".concat(o,"/comments/").concat(e,".json")),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not get comments.");const r=[];for(const o in n){const e=(0,s.A)({id:o},n[o]);r.push(e)}return r}}}]);
//# sourceMappingURL=823.e7b0d017.chunk.js.map