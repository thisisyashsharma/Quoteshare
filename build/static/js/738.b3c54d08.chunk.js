"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[738],{429:(t,e,o)=>{o.d(e,{A:()=>r});var s=o(51),n=o(43);const a=(t,e)=>"SEND"===e.type?{data:null,error:null,status:"pending"}:"SUCCESS"===e.type?{data:e.responseData,error:null,status:"completed"}:"ERROR"===e.type?{data:null,error:e.errorMessage,status:"completed"}:t,r=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[o,r]=(0,n.useReducer)(a,{status:e?"pending":null,data:null,error:null}),c=(0,n.useCallback)(async function(e){r({type:"SEND"});try{const o=await t(e);r({type:"SUCCESS",responseData:o})}catch(o){r({type:"ERROR",errorMessage:o.message||"Something went wrong!"})}},[t]);return(0,s.A)({sendRequest:c},o)}},738:(t,e,o)=>{o.r(e),o.d(e,{default:()=>y});var s=o(43),n=o(557);const a="Card_card__CQR7Y";var r=o(579);const c=t=>(0,r.jsx)("div",{className:a,children:t.children});var u=o(530);const l="QuoteForm_headingH2__PJS43",d="QuoteForm_form__oANko",i="QuoteForm_loading__LEggz",h="QuoteForm_control__khq+t",m="QuoteForm_actions__HvlWM";var f=o(751),p=o(369),j=o(127);const w=t=>{const[e,o]=(0,s.useState)(!1),a=(0,s.useRef)(),w=(0,s.useRef)();return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(n.XG,{when:e,message:t=>"Are you sured you want to leave? All entered data will be lost"}),(0,r.jsx)("h2",{className:l,children:"New Quote"}),(0,r.jsx)(c,{children:(0,r.jsxs)("form",{onFocus:()=>{o(!0)},className:d,onSubmit:function(e){e.preventDefault();const o=a.current.value,s=w.current.value,n=/\w/.test(o),r=/\w/.test(s);n&&r||alert("Please enter an author and your thoughts!"),t.onAddQuote({author:o,text:s}),a.current.value="",w.current.value="",alert("Astra submitted")},autoComplete:"off",children:[t.isLoading&&(0,r.jsxs)("div",{className:i,children:[" ",(0,r.jsx)(u.A,{})," "]}),(0,r.jsxs)("div",{className:h,children:[(0,r.jsxs)("label",{htmlFor:"author",children:["Author ",(0,r.jsx)(p.xvZ,{})," "]}),(0,r.jsx)("input",{type:"text",id:"author",required:!0,ref:a})]}),(0,r.jsxs)("div",{className:h,children:[(0,r.jsxs)("label",{htmlFor:"text",children:["Astra/Quote ",(0,r.jsx)(j.bb4,{})," "]}),(0,r.jsx)("textarea",{id:"text",rows:"5",required:!0,ref:w})]}),(0,r.jsx)("div",{className:m,children:(0,r.jsxs)("button",{onClick:()=>{o(!1)},className:"btn",children:["Add Quote ",(0,r.jsx)(f.Ygt,{})]})})]})})]})};var g=o(429),x=o(980);const y=()=>{const{sendRequest:t,status:e}=(0,g.A)(x.kr),o=(0,n.W6)();(0,s.useEffect)(()=>{"completed"===e&&o.push("/quotes")});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(w,{isLoading:"completed"===e,onAddQuote:e=>{t(e)}})})}},980:(t,e,o)=>{o.d(e,{BC:()=>u,Ow:()=>l,dB:()=>a,kr:()=>c,zt:()=>r});var s=o(51);const n="https://s22-auth-default-rtdb.firebaseio.com//quoteApp";async function a(){const t=await fetch("".concat(n,"/quotes.json")),e=await t.json();if(!t.ok)throw new Error(e.message||"Could not fetch quotes.");const o=[];for(const n in e){const t=(0,s.A)({id:n},e[n]);o.push(t)}return o}async function r(t){const e=await fetch("".concat(n,"/quotes/").concat(t,".json")),o=await e.json();if(!e.ok)throw new Error(o.message||"Could not fetch quote.");return(0,s.A)({id:t},o)}const c=async t=>{const e=await fetch("".concat(n,"/quotes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),o=await e.json();if(!e.ok)throw new Error(o.message||"Could not create quote.");return null};async function u(t){const e=await fetch("".concat(n,"/comments/").concat(t.quoteId,".json"),{method:"POST",body:JSON.stringify(t.commentData),headers:{"Content-Type":"application/json"}}),o=await e.json();if(!e.ok)throw new Error(o.message||"Could not add comment.");return{commentId:o.name}}const l=async t=>{const e=await fetch("".concat(n,"/comments/").concat(t,".json")),o=await e.json();if(!e.ok)throw new Error(o.message||"Could not get comments.");const a=[];for(const n in o){const t=(0,s.A)({id:n},o[n]);a.push(t)}return a}}}]);
//# sourceMappingURL=738.b3c54d08.chunk.js.map